<mfd-layer-stack-actions-header></mfd-layer-stack-actions-header>
<p-tree [value]="treeService.itemList"
        [(selection)]="treeService.selectedItem"
        [draggableNodes]="true"
        [droppableNodes]="true"
        (onNodeDrop)="onNodeDrop()"
        (selectionChange)="onSelectionChange($event)"
        [contextMenu]="cm"
        selectionMode="single"
        draggableScope="self"
        droppableScope="self"
        class="tree"
        styleClass="tree">
  <ng-template let-node  pTemplate="treeNode">
    <i class="pi node-visibility" [ngClass]="node.layerVisible ? 'pi-eye' : 'pi-eye-slash'"
       (click)="onToggleVisibility(node)"></i>
    <span class="node-label" [ngClass]="node.itemType === 'group' ? 'p-tree-group-header': ''">{{node.label}}</span>
  </ng-template>
</p-tree>

<p-contextMenu #cm [model]="items"></p-contextMenu>